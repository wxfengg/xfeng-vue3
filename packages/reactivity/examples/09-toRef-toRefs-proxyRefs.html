<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>09-toRef-toRefs-proxyRefs</title>
  </head>
  <body>
    <script type="module">
      import {
        ref,
        effect,
        toRef,
        reactive,
        toRefs,
        proxyRefs,
      } from '../dist/reactivity.esm.js'

      const state = reactive({
        name: 'XFeng',
        age: 18,
        count: ref(0),
      })

      const { name } = state
      const nameRef = toRef(state, 'name')

      console.log('ğŸš€ ~ name:', name)
      console.log('ğŸš€ ~ nameRef:', nameRef.value)

      state.name = 'NewName'
      console.log('ğŸš€ ~ name change:', name)
      console.log('ğŸš€ ~ nameRef change:', nameRef.value)

      const { name: refsName, age } = toRefs(state)
      console.log('ğŸš€ ~ age:', age.value)
      console.log('ğŸš€ ~ refsName:', refsName.value)
      age.value++
      state.name = 'refsName change'
      console.log('ğŸš€ ~ age change:', age.value)
      console.log('ğŸš€ ~ refsName change:', refsName.value)

      const obj = {
        count: ref(0),
      }
      const proxy = proxyRefs(obj)
      const { count } = obj
      const { count: proxyCount } = proxy
      const { count: toRefsProxyCount } = toRefs(proxy)

      // ä¸ç”¨ proxyRefsï¼šéœ€è¦ .value
      console.log('ğŸš€ ~ obj.count', obj.count.value) // 0
      // ç”¨ proxyRefsï¼šè‡ªåŠ¨è§£åŒ…ï¼Œä¸éœ€è¦ .value
      console.log('ğŸš€ ~ proxy.count', proxy.count) // 0
      proxy.count = 10 // è‡ªåŠ¨è®¾ç½®åˆ° ref.value
      console.log('ğŸš€ ~ count.value change:', obj.count.value)
      console.log('ğŸš€ ~ proxy.count change:', proxy.count)
      console.log('ğŸš€ ~ obj.count:', count.value)
      console.log('ğŸš€ ~ proxy.count:', proxyCount)
      console.log('ğŸš€ ~ toRefsProxyCount:', toRefsProxyCount.value)
    </script>
  </body>
</html>
